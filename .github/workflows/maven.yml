name: Java CI with Maven

on:
  push:
    branches:
      - main

env:
  API_KEY: ${{ secrets.API_KEY }}
  POSTGRES_PASSWORD: ${{ secrets.POSTGRES_PASSWORD }}
  POSTGRES_URL: ${{ secrets.POSTGRES_URL }}
  POSTGRES_USER: ${{ secrets.POSTGRES_USER }}
  APPLICATION_USER: ${{ secrets.APPLICATION_USER }}
  BASE_URL: ${{ var.BASE_URL }}
  END_TIME: ${{ var.END_TIME }}
  LATITUDE: ${{ var.LATITUDE }}
  LONGITUDE: ${{ var.LONGITUDE }}
  MAX_NUMBER_REQUESTS: ${{ var.MAX_NUMBER_REQUESTS }}
  RADIUS: ${{ var.RADIUS }}
  START_TIME: ${{ var.START_TIME }}
  WAIT_TIME: ${{ var.WAIT_TIME }}

jobs:
  build-and-test:
    runs-on: ubuntu-latest


    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up JDK
      uses: actions/setup-java@v2
      with:
        distribution: 'adopt'
        java-version: '17'

    - name: Build with Maven
      run: mvn -B clean install
