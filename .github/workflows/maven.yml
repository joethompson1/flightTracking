name: Java CI with Maven

on:
  push:
    branches:
      - main

env:
  API_KEY: ${{ secrets.API_KEY }}
  POSTGRES_PASSWORD: ${{ secrets.POSTGRES_PASSWORD }}
  POSTGRES_URL: ${{ secrets.POSTGRES_URL }}
  POSTGRES_USER: ${{ secrets.POSTGRES_USER }}
  APPLICATION_USER: ${{ secrets.APPLICATION_USER }}
  BASE_URL: ${{ secrets.BASE_URL }}
  LATITUDE: ${{ secrets.LATITUDE }}
  LONGITUDE: ${{ secrets.LONGITUDE }}
  MAX_NUMBER_REQUESTS: ${{ secrets.MAX_NUMBER_REQUESTS }}
  RADIUS: ${{ secrets.RADIUS }}
  START_TIME: ${{ secrets.START_TIME }}
  END_TIME: ${{ secrets.END_TIME }}
  WAIT_TIME: ${{ secrets.WAIT_TIME }}

jobs:
  build-and-test:
    runs-on: ubuntu-latest


    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up JDK
      uses: actions/setup-java@v3
      with:
        distribution: 'adopt'
        java-version: '17'
        cache: maven

    - name: Print Environment Variables
      run: |
        echo "API_KEY: ${{ env.API_KEY }}"
        echo "POSTGRES_PASSWORD: ${{ env.POSTGRES_PASSWORD }}"
        echo "POSTGRES_URL: ${{ env.POSTGRES_URL }}"
        echo "POSTGRES_USER: ${{ env.POSTGRES_USER }}"
        echo "APPLICATION_USER: ${{ env.APPLICATION_USER }}"
        echo "BASE_URL: ${{ env.BASE_URL }}"
        echo "LATITUDE: ${{ env.LATITUDE }}"
        echo "LONGITUDE: ${{ env.LONGITUDE }}"
        echo "MAX_NUMBER_REQUESTS: ${{ env.MAX_NUMBER_REQUESTS }}"
        echo "RADIUS: ${{ env.RADIUS }}"
        echo "START_TIME: ${{ env.START_TIME }}"
        echo "END_TIME: ${{ env.END_TIME }}"
        echo "WAIT_TIME: ${{ env.WAIT_TIME }}"

    - name: Build with Maven
      run: mvn --batch-mode --update-snapshots verify
